!function(){"use strict";!function(e,t,n){function r(t){return new e(function(e){var n=new Image;n.onload=function(){e(this)},n.src=t})}function o(e,t){var n=e%t,r=Math.floor(e/t),o=t,i=0;return n&&(r++,o=Math.floor(e/r),i=(t-o)/2),{fullParts:r,partSide:o,partTop:i}}function i(e,t,n){var r=document.createElement("canvas"),o=r.getContext("2d"),i=0;return r.width=t,r.height=t,function(){return console.log(i),o.clearRect(0,0,t,t),o.drawImage(e,i,n,t,t,0,0,t,t),i+=t,r.toDataURL("image/jpeg")}}function c(e){for(var t=o(e.width,e.height),n=t.fullParts,r=t.partSide,c=t.partTop,l=Math.floor((d.offsetWidth-2*(n-1))/n),u=i(e,r,c),a=0;a<n;a++){var s=document.createElement("img");s.src=u();var h=s.cloneNode();s.className="result-tmbs__img",s.style.width=l+"px",d.appendChild(s),h.className="result-full__img",a?f.insertBefore(h,f.childNodes[0]):f.appendChild(h)}}function l(){var e=this.files[0];u(d),u(f),p.show(),m.hide(),h.hide(),w.hide(),r(window.URL.createObjectURL(e)).then(c).then(function(){return window.URL.revokeObjectURL(e)}).then(p.hide).then(m.show).then(h.show)}function u(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function a(e){return{show:function(){e.style.display=""},hide:function(){e.style.display="none"}}}var s=document.getElementById("file"),d=document.querySelector(".result-tmbs"),f=document.querySelector(".result-full"),h=(new t({color:"#fff",corners:1,lines:8}).spin(document.querySelector(".please-wait")),a(document.querySelector(".upload"))),m=a(document.querySelector(".result-screen")),p=a(document.querySelector(".please-wait")),w=a(document.querySelector(".start-screen__intro"));s.addEventListener("change",l)}(vow.Promise,Spinner)}();
